# name: CI

# on:
#   push:
#     branches: [release]
#   pull_request:
#     branches: [release]

#   workflow_dispatch:

# jobs:
#   build:
#     runs-on: ubuntu-latest

#     if: github.ref == 'refs/heads/release'

#     strategy:
#       matrix:
#         node-version: [16.x]

#     steps:
#       - uses: actions/checkout@v2

#       - run: npm -v

#       - name: rsync deployments
#         uses: burnett01/rsync-deployments@5.1
#         with:
#           switches: -avzr --delete
#           path: ./*
#           remote_path: /home/bitnami/apps/
#           remote_host: 13.37.88.156
#           remote_user: bitnami
#           remote_key: '${{ secrets.SSH_PRIVATE_KEY }}'

#           name: DEPLOY
on:
  push:
    branches:
      - release

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: rsync deployments
        uses: burnett01/rsync-deployments@5.2.1
        with:
          switches: -avzr --delete
          path: ./*
          remote_path: /var/www/portfolio/
          remote_host: 13.37.88.156
          remote_user: bitnami
          remote_key: ${{ secrets.SSH_PRIVATE_KEY }}
